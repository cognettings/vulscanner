---
Resources:
  listener1:
    Type: AWS::ElasticLoadBalancingV2::Listener
    Properties:
      DefaultActions:
        - Type: redirect
          RedirectConfig:
            Protocol: HTTPS
            Port: 443
            Host: '#{host}'
            Path: /#{path}
            Query: '#{query}'
            StatusCode: HTTP_301
      LoadBalancerArn: myLoadBalancer
      Port: 80
      Protocol: HTTPS
      SslPolicy: ELBSecurityPolicy-2016-08
  listener2:
    Type: AWS::ElasticLoadBalancingV2::Listener
    Properties:
      DefaultActions:
        - Type: redirect
          RedirectConfig:
            Protocol: HTTPS
            Port: 443
            Host: '#{host}'
            Path: /#{path}
            Query: '#{query}'
            StatusCode: HTTP_301
      LoadBalancerArn: myLoadBalancer
      Port: 80
      Protocol: HTTP
      SslPolicy: ELBSecurityPolicy-TLS-1-2-2017-01
